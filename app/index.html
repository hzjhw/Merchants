<!DOCTYPE html>
<html>
<head lang="en">
    <title>上门网330门业招商</title>
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
    <meta name="kik-transparent-statusbar" content="true">
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/style.css"/>
</head>
<body>
<!--加载动画-->
<div id="Loading" style="display: block;">
    <div id="heart">
        <a href="#" onclick="stopLoading();"><img
                src="images/loading.gif"></a>
    </div>
    <div id="Waiting">
        <span style="text-align:center; color:#F00">
        </span>
    </div>
</div>
<!--首页-->
<div class="app-page" data-page="home">
    <div class="app-logo icon-bg">
        <div class="app-button btn-register">注册</div>
        <div class="app-button btn-login">登录</div>
    </div>
    <div class="app-topbar">
        <div class="left app-button btn-menu icon-bg grid-2">分类</div>
        <div class="app-search grid-6"><input class="input-search icon-bg" type="text"/><div class="btn-search-submit">提交</div></div>
        <div class="right app-button grid-2  btn-my icon-bg">我的</div>
    </div>
    <div class="app-content">
        
        <div class="app-banner">
            <img src="images/banner.jpg" alt="" width="100%"/>
        </div>
        
        <!--导航菜单-->
        <div id="J_CategoryDialog" class="category-dialog" style="display: block;">
            <h2 class="category-hd">商品服务分类</h2>

            <p class="category-bd" data-spm="20000010">
                <a class="item-nvz" href="javascript:;" data-target="lists">女装</a>
                <a class="item-dq" href="javascript:;">电器</a>
                <a class="item-nz" href="javascript:;">男装</a>
                <a class="item-yd" href="javascript:;">运动</a>
                <a class="item-hw" href="javascript:;">户外</a>
                <a class="item-nvx" href="javascript:;">女鞋</a>
                <a class="item-nx" href="javascript:;">男鞋</a>
                <a class="item-xb" href="javascript:;">箱包</a>
                <a class="item-mz" href="javascript:;">美妆</a>
                <a class="item-ny" href="javascript:;">内衣</a>
                <a class="item-my" href="javascript:;">母婴</a>
                <a class="item-sp" href="javascript:;">食品</a>
                <a class="item-jz" href="javascript:;">家装</a>
                <a class="item-qc" href="javascript:;">汽车</a>
                <a class="item-yy" href="javascript:;">图书</a>
            </p>
            <a href="javascript:void(0);" id="J_CategoryClose" class="category-close" target="_self">关闭</a>
        </div>
        <div id="J_CategoryMask" class="category-mask" style="display: none;"></div>
        <p class="app-section">
            Welcome to the app.js default theme. Click around to see what each widget looks like.
        </p>

        <div class="app-section">
            <div class="app-button" data-target="lists">Lists</div>
            <div class="app-button" data-target="buttons">Buttons</div>
            <div class="app-button" data-target="inputs">Inputs</div>
            <div class="app-button" data-target="scroll">Scrolling</div>
            <div class="app-button" data-target="other">Other</div>
            <div class="app-button" data-target="lists">Lists</div>
            <div class="app-button" data-target="buttons">Buttons</div>
            <div class="app-button" data-target="inputs">Inputs</div>
            <div class="app-button" data-target="scroll">Scrolling</div>
            <div class="app-button" data-target="other">Other</div>
            <div class="app-button" data-target="lists">Lists</div>
            <div class="app-button" data-target="buttons">Buttons</div>
            <div class="app-button" data-target="inputs">Inputs</div>
            <div class="app-button" data-target="scroll">Scrolling</div>
            <div class="app-button" data-target="other">Other</div>
            <div class="app-button" data-target="lists">Lists</div>
            <div class="app-button" data-target="buttons">Buttons</div>
            <div class="app-button" data-target="inputs">Inputs</div>
            <div class="app-button" data-target="scroll">Scrolling</div>
            <div class="app-button" data-target="other">Other</div><div class="app-button" data-target="lists">Lists</div>
            <div class="app-button" data-target="buttons">Buttons</div>
            <div class="app-button" data-target="inputs">Inputs</div>
            <div class="app-button" data-target="scroll">Scrolling</div>
            <div class="app-button" data-target="other">Other</div><div class="app-button" data-target="lists">Lists</div>
            <div class="app-button" data-target="buttons">Buttons</div>
            <div class="app-button" data-target="inputs">Inputs</div>
            <div class="app-button" data-target="scroll">Scrolling</div>
            <div class="app-button" data-target="other">Other</div>



        </div>
    </div>
</div>

<div class="app-page" data-page="lists">
    <div class="app-topbar">
        <div class="grid-2"><div class="left app-button" data-back data-autotitle>返回</div></div>
        <div class="app-search grid-6"><input class="input-search icon-bg" type="text"/><div class="btn-search-submit">提交</div></div>
        <div class="right app-button  btn-my icon-bg">我的</div>
    </div>

    <div class="app-content">
        <ul class="app-list">
            <label>Label 1</label>
            <li class="app-button" data-target="lists">Item 1</li>
            <li class="app-button">Item 2</li>
            <li class="app-button">Item 3</li>
            <label>Label 2</label>
            <li>Item 4</li>
            <li>Item 5</li>
            <li>Item 6</li>
            <label>Label 3</label>
            <li>Item 7</li>
            <li>Item 8</li>
            <li>Item 9</li>
            <label>Label 4</label>
            <li>Item 10</li>
            <li>Item 11</li>
            <li>Item 12</li>
            <label>Label 5</label>
            <li>Item 13</li>
            <li>Item 14</li>
            <li>Item 15</li>
        </ul>
    </div>
</div>

<div class="app-page" data-page="buttons">
    <div class="app-topbar">
        <div class="left app-button" data-back data-autotitle></div>
        <div class="app-title"><span class="app-icon"></span>Buttons</div>
        <div class="right app-button app-menu">Dialog</div>
    </div>

    <div class="app-content">
        <div class="app-section">
            <ul class="app-list">
                <li class="app-button">Item 1</li>
                <li class="app-button">Item 2</li>
                <li class="app-button">Item 3</li>
            </ul>
        </div>

        <div class="app-section">
            <div class="app-button red">Button 1</div>
            <div class="app-button green">Button 2</div>
            <div class="app-button blue">Button 3</div>
        </div>
    </div>
</div>

<div class="app-page" data-page="inputs">
    <div class="app-topbar">
        <div class="app-title"><span class="app-icon"></span>Inputs</div>
        <div class="right app-button" data-back>Done</div>
    </div>

    <div class="app-content">
        <input class="app-input" type="search" placeholder="Search..">

        <div class="app-section">
            <input class="app-input" placeholder="Input">
        </div>

        <form class="app-section">
            <input class="app-input" name="subject" placeholder="Subject">
            <textarea class="app-input" name="message" placeholder="Message"></textarea>

            <div class="app-button green app-submit">Send</div>
        </form>
    </div>
</div>

<div class="app-page scroll-page" data-page="scroll">
    <div class="app-topbar">
        <div class="left app-button" data-back data-autotitle></div>
        <div class="app-title"><span class="app-icon"></span>Scrolling</div>
    </div>
    <div class="app-content">
        <div class="loading"></div>
        <ul class="app-list">
            <li>Item <span></span></li>
        </ul>
    </div>
</div>

<div class="app-page other-page" data-page="other">
    <div class="app-topbar">
        <div class="left app-button" data-back data-autotitle></div>
        <div class="app-title"><span class="app-icon"></span>Scrolling</div>
    </div>
    <div class="app-content">
        other
    </div>
</div>


<script src="scripts/base.js"></script>
<script src="const.js"></script>
<script src="config.local.js"></script>
<script src="config.js"></script>
<script>
    var COLOUR_KEY = '__BASIC_APP_COLOUR___';

    var colourPages = [],
            colour = localStorage[COLOUR_KEY] ||  'teal';

    function setupPageColour(page) {
        var $topbar = $(page).find('.app-topbar');
        colourPages.push($topbar);
        if (colour) {
            $topbar.addClass(colour);
        }
    }
    function stopLoading() {
        $("#Loading").fadeOut();
    }

    seajs.use(['App'], function (App) {
        App.controller('home', function (page) {
            setupPageColour(page);
            $(page).find('[data-target="inputs"]')
                    .attr('data-target', null)
                    .stickyClick(function (unlock) {
                        App.pick('inputs', function (params) {
                            console.log(JSON.stringify(params));
                            unlock();
                        });
                    });

            function hideMenu() {
                $('#J_CategoryDialog').removeClass('category-dialog-unfold');
                $('#J_CategoryMask').hide();
            }

            $(page).find('.category-bd a').on('click', function () {
                App.load($(this).attr('data-target'));
            });
            $(page).find('.btn-menu').on('click', function (e) {
                App._Events.stopEvent(e);
                $('#J_CategoryDialog').addClass('category-dialog-unfold');
                $('#J_CategoryMask').show();
                /*$(window).one('click', function (e) {
                 hideMenu();
                 return false;
                 });*/
            });
            $(page).find('#J_CategoryClose').on('click', function (e) {
                hideMenu();
            });
            $(page).find('.btn-login').on('click', function () {
                App.dialog({
                    doButton: '登录',
                    regButton: '注册',
                    cancelButton: '关闭'
                }, function (choice) {
                    switch (choice) {
                        case 'do':
                            alert('登录');
                            break;
                        case 'reg':
                            alert('注册');
                            break;
                        case 'cancel':
                            alert('关闭');
                            break;
                    }
                });
            });
        });
        App.controller('other', function (page) {
            setupPageColour(page);
            this.transition = 'scale-in';
            this.onShow = function () {
                console.log('onShow');
            }
        });
        App.controller('lists', function (page) {
            setupPageColour(page);

            this.onShow = function () {
                console.log('lists page is visible');
            };

            this.onHide = function () {
                console.log('lists page is invisible');
            };

            this.onBack = function () {
                console.log('lists page is going back');
            };

            this.onForward = function () {
                console.log('lists page is going forward');
            };
        });

        App.controller('buttons', function (page) {
            setupPageColour(page);

            $(page).find('.app-menu')
                    .on('click', function () {
                        App.dialog({
                            doButton: 'Do Something',
                            otherButton: 'Or Another Thing',
                            okButton: 'Share on Kik',
                            cancelButton: 'Cancel'
                        }, function (choice) {
                            console.log(choice);
                        });
                    });
        });

        App.controller('inputs', function (page) {
            setupPageColour(page);
            if (App.platform === 'ios') {
                this.transition = 'slideon-down';
            }
            App.form($(page).find('form'), this.reply);
        });

        App.controller('scroll', function (page) {
            setupPageColour(page);
            var $loading = $(page).find('.loading'),
                    $list = $(page).find('.app-list'),
                    $listItem = $(page).find('.app-list li'),
                    totalPage = null,
                    page = 1,
                    i = 1;

            $loading.remove();
            $listItem.remove();
            App.infiniteScroll($list, { loading: $loading }, function (callback) {
                if (totalPage && (page > totalPage)) return null;
                var query = '/tester/index';
                App.query(query, {pageSize: 10, pageNumber: 1}, function (result) {
                    totalPage = result.totalPage;
                    setTimeout(function () {
                        var list = [];
                        for (var j = 0; j < result.list.length; j++) {
                            var $node = $listItem.clone();
                            $node.find('span').text(i + j);
                            list.push($node);
                        }
                        i += 10;
                        page += 1;
                        callback(list);
                    }, 1200);
                });
            });
        });

        App.enableDragTransition();

        try {
            App.restore();
        } catch (err) {
            App.load('home');
        }

    });

</script>
</body>
</html>