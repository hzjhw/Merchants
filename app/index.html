<!DOCTYPE html>
<html>
<head lang="en">
    <title>上门网330门业招商</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport"
          content="width=640,maximum-scale=1.0,user-scalable=no,target-densitydpi=device-dpi, minimal-ui"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-touch-fullscreen" content="no"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <link rel="stylesheet" href="styles/base.css?v=102">
    <link rel="stylesheet" href="styles/style.css?v=102"/>

    <link rel="stylesheet" href="styles/brand.css"/>
    <link rel="stylesheet" href="styles/favorite.css"/>
    <link rel="stylesheet" href="styles/login.css"/>
    <link rel="stylesheet" href="styles/message.css"/>
    <link rel="stylesheet" href="styles/product.css"/>
    <link rel="stylesheet" href="styles/register.css"/>

</head>
<body>
<!--加载动画-->
<div id="Loading" style="display: block;">
    <div id="heart">
        <a href="#" onclick="stopLoading();"><img
                src="images/loading.gif" width="200%"></a>
    </div>
    <div id="Waiting">
        <span style="text-align:center; color:#F00">
        </span>
    </div>
</div>
<!--首页-->
<div class="app-page" data-page="home">
    <div class="app-logo-container">
        <div class="app-logo icon-bg grid-6">
        </div>
        <div class="grid-4" style="text-align: right; height: 100%;">
            <div class="app-button btn-register" data-target="register_dealers">注册</div>
            <div class="app-button btn-login" data-target="login_dealers">登录</div>
        </div>

    </div>
    <div class="app-topbar">
        <div class="app-button btn-menu icon-bg grid-2" data-target="category">分&nbsp;类</div>
        <div class="app-search grid-6"><input class="input-search icon-bg" type="button"/>

            <div class="search-placeholder app-button" data-target="search">搜索品牌&nbsp;/&nbsp;搜索产品</div>
        </div>
        <div class="app-button grid-2  btn-my icon-bg"><span class="span-my">我&nbsp;的</span>

            <div class="container-my" style="display:none;">
                <ul class="ul-my">
                    <li data-target="favorite_info" >
                        <div class="icon-bg icon-member app-button"></div>
                        <p>我的资料</p>
                    </li>
                    <li data-target="favorite_product">
                        <div class="icon-bg icon-door app-button"></div>
                        <p>收藏的产品</p></li>
                    <li data-target="favorite_brand">
                        <div class="icon-bg icon-diamond app-button"></div>
                        <p>收藏的品牌</p></li>
                    <li data-target="favorite_cooprate">
                        <div class="icon-bg icon-hand app-button"></div>
                        <p>我的合作意向</p></li>
                    <li data-target="favorite_money">
                        <div class="icon-bg icon-money app-button"></div>
                        <p>我的代金券</p></li>
                    <li data-target="favorite_message">
                        <div class="icon-bg icon-message app-button"></div>
                        <p>我的留言</p></li>
                    <li data-target="product_list">
                        <div class="icon-bg icon-message"></div>
                        <p>产品列表</p></li>
                    <li data-target="product_detail">
                        <div class="icon-bg icon-message"></div>
                        <p>产品详细</p></li>
                    <li data-target="dealers">
                        <div class="icon-bg icon-message"></div>
                        <p>经销商</p></li>
                    <li data-target="brand_detail">
                        <div class="icon-bg icon-message"></div>
                        <p>品牌详细</p></li>
                    <li data-target="brand_info">
                        <div class="icon-bg icon-message"></div>
                        <p>厂家信息</p></li>
                    <li data-target="brand_tec">
                        <div class="icon-bg icon-message"></div>
                        <p>厂家实力</p></li>
                    <li data-target="brand_product">
                        <div class="icon-bg icon-message"></div>
                        <p>产品展示</p></li>
                    <li data-target="brand_blank">
                        <div class="icon-bg icon-message"></div>
                        <p>品牌空白区域</p></li>
                    <li data-target="product_search">
                        <div class="icon-bg icon-message"></div>
                        <p>产品搜索</p></li>
                </ul>
            </div>

        </div>
    </div>
    <div class="app-content">
        <!--banner-->
        <div class="app-banner" style="overflow:hidden;">
            <img src="images/banner.jpg" alt="" width="100%"/>
        </div>
        <!--品牌/产品展示馆-->
        <div class="app-section section-title">
            品牌/产品展示馆 &nbsp;&nbsp;&nbsp;
        </div>
        <div class="app-section">
            <ul class="cate-ul">
                <li class="cate_01 cate-l" data-id="4361326338 " data-title="品牌展示馆" data-banner="banner">
                    <div class="cate-title  app-button">
                        品牌展示馆
                        <p>海量品牌等你来选</p>
                    </div>
                </li>
                <li class="cate_02 cate-r" data-id="" data-title="特色门馆" data-banner="banner">
                    <div class="cate-title app-button">
                        特色门馆
                        <p>各厂家最待色的门</p>
                    </div>
                </li>
                <li class="cate_03 cate-l" data-id="4531876237" data-title="木门馆" data-banner="mumen_banner">
                    <div class="cate-title app-button">
                        木门馆
                        <p>工艺上具备原木的天然待性与环保性</p>
                    </div>
                </li>
                <li class="cate_04 cate-r" data-id="5276256741" data-title="生态木门/强化门" data-banner="shengtaimen_banner">
                    <div class="cate-title app-button">
                        生态木门/强化门
                        <p>拥有更长的使用寿命</p>
                    </div>
                </li>
                <li class="cate_05 cate-l" data-id="4412667554" data-title="钢木门馆" data-banner="gangmumen_banner">
                    <div class="cate-title app-button">
                        钢木门馆
                        <p>无毒绿色健康环保</p>
                    </div>
                </li>
                <li class="cate_06 cate-r" data-id="3486245445" data-title="铝合金门馆" data-banner="lvhejinmen_banner">
                    <div class="cate-title app-button">
                        铝合金门馆
                        <p>防尘、防水、隔音效果突出</p>
                    </div>
                </li>
                <li class="cate_07 cate-l" data-id="1417272248" data-title="防盗门馆" data-banner="fangdaomen_banner">
                    <div class="cate-title app-button">
                        防盗门馆
                        <p>工艺上具备原木的天然待性与环保性</p>
                    </div>
                </li>
                <li class="cate_08 cate-r" data-id="4432837154" data-title="防火门馆" data-banner="fanghuomen_banner">
                    <div class="cate-title app-button">
                        防火门馆
                        <p>工艺上具备原木的天然待性与环保性</p>
                    </div>
                </li>
                <li class="cate_09 cate-l" data-id="3818678422" data-title="非标门馆" data-banner="feibiaomen_banner">
                    <div class="cate-title app-button">
                        非标门馆
                        <p>工艺上具备原木的天然待性与环保性</p>
                    </div>
                </li>
                <li class="cate_10 cate-r" data-id="8636812455" data-title="铜门/不锈钢门馆" data-banner="buxiugangmen_banner">
                    <div class="cate-title app-button">
                        铜门/不锈钢门馆
                        <p>工艺上具备原木的天然待性与环保性</p>
                    </div>
                </li>

            </ul>
        </div>
        <!--品牌展示-->
        <div id="merchants-show">
            <div class="app-section">
                <div class="merchant-title-bg"></div>
                <div class="merchant-title">
                    <div class="grid-3 ">
                        <div class="merchant-t-tl">品牌护航</div>
                    </div>
                    <div class="grid-4 relative merchant-t-m">
                        {{title}}
                    </div>
                    <div class="grid-3 ">
                        <div class="merchant-t-tr">代理无忧</div>
                    </div>
                </div>
                <div class="merchant-content">
                    <ul id="brandList" class="merchant-content-ul">
                        {{#each list}}
                        <li data-id="{{cust_id}}">
                            <div class="merchant-cont-img">
                                <img src="{{CONST 'PIC_URL'}}{{brand_path}}" alt="" width="284" height="347"/>
                            </div>
                            <div class="merchant-cont-title">
                                {{cust_name}}
                            </div>
                            <div class="merchant-cont-brand">
                                所属品牌：{{brand_name}}
                            </div>
                        </li>
                        {{/each}}
                    </ul>
                </div>
            </div>
        </div>
        <!--页脚-->
        <div class="app-section merchant-footer">
            <p>①2015 浙B2-20050229-3 用户反馈中心</p>
            <img src="images/bottom-logo.png" alt="手机 3月30日"/>

            <div><strong>足不出户逛展会</strong></div>
        </div>
    </div>
</div>
<!--分类-->
<div class="app-page" data-page="category"></div>
<!--登录-->
<div class="app-page login_dealers" data-page="login_dealers"></div>
<!--注册-->
<div class="app-page login_dealers" data-page="register_dealers"></div>
<!--搜索-->
<div class="app-page" data-page="search">
    <div class="app-section">
        <div class="category-title">
            <div class="cate-item category-zg current">
                空白区域搜索
            </div>
            <div class="cate-item category-pro">
                搜索产品
            </div>
            <div class="app-button category-close icon-bg" data-back></div>
        </div>
    </div>
    <div class="app-content">
        <div class="app-section relative">
            <div class="cate-item-sub cate-item-sub-0 cate-cur">
                <div class="cate-item-sub-title">
                    <input class="input-search" type="text" placeholder="请输入要搜索的空白区域地址"/>
                </div>
                <div class="search-tip">
                    <p><span class="red">提示：</span>在下面输入框中先输入您要搜索的空 白区域地址，如：输入<span class="red">永康</span>
                        ，那么就会列出永康为空白区域的品牌，输入时， 不要输入省、市、县、区等字， 如：<span class="red">
                            不要输入永康市
                    </span>

                    </p>
                </div>
            </div>
            <div class="cate-item-sub cate-item-sub-1">
                <div class="cate-item-sub-title">
                    请选择以下产品价格分类进入查看产品 <span class="icon-bg icon-down"></span>
                </div>
                <ul class="cate-pro-ul search-price-ul">
                    {{#each list}}
                    <li id="{{para_key}}">{{para_value}}</li>
                    {{/each}}
                </ul>
            </div>
        </div>
    </div>
</div>
<!--品牌-->
<div class="app-page" data-page="brand_list"></div>
<div class="app-page" data-page="brand_detail"></div>
<div class="app-page" data-page="brand_info"></div>
<div class="app-page" data-page="brand_product"></div>
<div class="app-page" data-page="brand_tec"></div>
<div class="app-page" data-page="brand_blank"></div>
<div class="app-page" data-page="brand_unique"></div>
<!--产品-->
<div class="app-page" data-page="product_list"></div>
<div class="app-page" data-page="product_detail"></div>
<div class="app-page" data-page="product_search"></div>
<!--经销商-->
<div class="app-page" data-page="favorite_info"></div>
<div class="app-page" data-page="favorite_product"></div>
<div class="app-page" data-page="favorite_brand"></div>
<div class="app-page" data-page="favorite_cooprate"></div>
<div class="app-page" data-page="favorite_message"></div>
<div class="app-page" data-page="favorite_money"></div>


<script src="scripts/base.js?v=15210"></script>
<script src="const.js"></script>
<script src="config.local.js"></script>

<script src="modules/brand/main.js"></script>
<script src="modules/favorite/main.js"></script>
<script src="modules/login/main.js"></script>
<script src="modules/message/main.js"></script>
<script src="modules/product/main.js"></script>
<script src="modules/register/main.js"></script>
<script src="modules/category/main.js"></script>

<script src="config.js"></script>
<script>
var COLOUR_KEY = '__BASIC_APP_COLOUR___';
var WINDOW_WIDTH = null;

var colourPages = [],
        colour = localStorage[COLOUR_KEY] || 'teal';

function stopLoading() {
    $("#Loading").fadeOut();
}

function bindBrandDetail(dom) {
    $('.merchant-content-ul li', dom).click(function () {
        App.load('brand_detail', {
            id: $(this).attr('data-id')
        });
    });
}

seajs.use(['App'], function (App) {
    /*首页*/
    App.controller('home', function (page) {
        App.addHash('#/home');
        $(page).find('[data-target="inputs"]')
                .attr('data-target', null)
                .stickyClick(function (unlock) {
                    App.pick('inputs', function (params) {
                        console.log(JSON.stringify(params));
                        unlock();
                    });
                });
        // 我的330
        $(page).find('.btn-my').click(function () {
            var $dom = $(this).find('.span-my').get(0);
            seajs.use(['dialog'], function (dialog) {
                window.dialog = dialog({
                    id: '330dialog',
                    title: '我的330',
                    align: 'bottom right',
                    width: WINDOW_WIDTH - 280,
                    content: $('.container-my', $(page)).html(),
                    onshow: function () {
                        var ctx = this;
                        $('.ul-my li').click(function () {
                            ctx.close().remove();
                            App.load($(this).attr('data-target'));
                        });
                    }
                }).showModal($dom);
            })
        });

        /*品牌分类*/
        $(page).find('.cate-ul li').click(function () {
            if ($(this).attr('data-id').length === 0) {
                App.load('brand_unique');
                return;
            }
            App.load('brand_list', {
                id: $(this).attr('data-id'),
                title: $(this).attr('data-title'),
                banner: $(this).attr('data-banner')
            });
        });
        // 门馆展示
        App.query('/index', {
            success: function (result) {
                var $container = $('#merchants-show', $(page));
                var template = $container.html();
                $container.empty();
                App.render({ render: '#merchants-show', page: page, template: template, data: {
                    title: '品牌展示馆',
                    list: result.brandList.list
                }, callback: bindBrandDetail});
                App.render({ render: '#merchants-show', page: page, template: template, data: {
                    title: '铝合金门馆',
                    list: result.lvhejinList.list
                }, callback: bindBrandDetail});
                App.render({ render: '#merchants-show', page: page, template: template, data: {
                    title: '生态木门/强化门馆',
                    list: result.shengtaiList.list
                }, callback: bindBrandDetail});
                App.render({ render: '#merchants-show', page: page, template: template, data: {
                    title: '防火门馆',
                    list: result.fanghuoList.list
                }, callback: bindBrandDetail});
                App.render({ render: '#merchants-show', page: page, template: template, data: {
                    title: '非标门馆',
                    list: result.feibiaoList.list
                }, callback: bindBrandDetail});
                App.render({ render: '#merchants-show', page: page, template: template, data: {
                    title: '防盗门馆',
                    list: result.fangdaoList.list
                }, callback: bindBrandDetail});
                App.render({ render: '#merchants-show', page: page, template: template, data: {
                    title: '不锈钢门馆',
                    list: result.buxiugangList.list
                }, callback: bindBrandDetail});
                App.render({ render: '#merchants-show', page: page, template: template, data: {
                    title: '钢木门馆',
                    list: result.gangmuList.list
                }, callback: bindBrandDetail});
                App.render({ render: '#merchants-show', page: page, template: template, data: {
                    title: '木门馆',
                    list: result.mumenList.list
                }, callback: bindBrandDetail});
            }
        });
        // 布局相关
        WINDOW_WIDTH = $(window).width();
        $(page).find('.app-logo-container').height(WINDOW_WIDTH * 0.2);
        $(window).resize(function () {
            $(page).find('.app-logo-container').height(WINDOW_WIDTH * 0.2);
        });
    });

    /*分类页面*/
    App.controller('category', function (page) {
        App.addHash('#/category');
        this.transition = 'slideon-down';
        seajs.use(['CategoryCtrl'], function (CategoryCtrl) {
            new CategoryCtrl(page, this);
        });
    });
    /*品牌列表*/
    App.controller('brand_list', function (page) {
        var ctx = this;
        App.addHash('#/brand_list');

        this.transition = 'slide-left';

        if (!ctx.args.id) ctx.args.id = localStorage['brand_list_args_id'];
        if (!ctx.args.title) ctx.args.title = localStorage['brand_list_args_title'];
        if (!ctx.args.banner) ctx.args.banner = localStorage['brand_list_args_banner'];

        localStorage['brand_list_args_id'] = ctx.args.id;
        localStorage['brand_list_args_title'] = ctx.args.title;
        localStorage['brand_list_args_banner'] = ctx.args.banner;

        seajs.use(['BrandList'], function (BrandList) {
            new BrandList(page, ctx.args.id, ctx.args.title, ctx.args.banner, ctx);
        });
    });
    /*品牌详细*/
    App.controller('brand_detail', function (page) {
        App.addHash('#/brand_detail');
        this.transition = 'fade';
        var ctx = this;
        if (!ctx.args.id) ctx.args.id = localStorage['brand_detail_args_id'];
        localStorage['brand_detail_args_id'] = ctx.args.id;
        seajs.use(['BrandDetail'], function (BrandDetail) {
            new BrandDetail(page, ctx.args.id, ctx);
        })
    });
    App.controller('brand_info', function (page) {
        App.addHash('#/brand_info');
        this.transition = 'fade';
        var ctx = this;
        if (!ctx.args.id) ctx.args.id = localStorage['brand_info_args_id'];
        localStorage['brand_info_args_id'] = ctx.args.id;
        seajs.use(['BrandInfo'], function (BrandInfo) {
            new BrandInfo(page, ctx.args.id, ctx);
        });
    });
    App.controller('brand_product', function (page) {
        App.addHash('#/brand_product');
        this.transition = 'fade';
        var ctx = this;
        if (!ctx.args.id) ctx.args.id = localStorage['brand_product_args_id'];
        localStorage['brand_product_args_id'] = ctx.args.id;
        seajs.use(['BrandProduct'], function (BrandProduct) {
            new BrandProduct(page, ctx.args.id, ctx);
        });
    });
    App.controller('brand_tec', function (page) {
        App.addHash('#/brand_tec');
        this.transition = 'fade';
        var ctx = this;
        if (!ctx.args.id) ctx.args.id = localStorage['brand_tec_args_id'];
        localStorage['brand_tec_args_id'] = ctx.args.id;
        seajs.use(['BrandTec'], function (BrandTec) {
            new BrandTec(page, ctx.args.id, ctx);
        });
    });
    App.controller('brand_blank', function (page) {
        App.addHash('#/brand_blank');
        this.transition = 'fade';
        var ctx = this;
        if (!ctx.args.id) ctx.args.id = localStorage['brand_blank_args_id'];
        localStorage['brand_blank_args_id'] = ctx.args.id;
        seajs.use(['BrandBlank'], function (BrandBlank) {
            new BrandBlank(page, ctx.args.id, ctx);
        });
    });
    App.controller('brand_unique', function (page) {
        App.addHash('#/brand_unique');
        var ctx = this;
        seajs.use(['BrandUnique'], function (BrandUnique) {
            new BrandUnique(page, ctx);
        });
    });
    /*产品列表*/
    App.controller('product_list', function (page) {
        App.addHash('#/product_list');
        this.transition = 'fade';
        var ctx = this;
        if (!ctx.args.id) ctx.args.id = localStorage['product_list_args_id'];
        localStorage['product_list_args_id'] = ctx.args.id;
        seajs.use(['ProductList'], function (ProductList) {
            new ProductList(page, ctx.args.id,ctx);
        });
    });

    /*产品详细*/
    App.controller('product_detail', function (page) {
        App.addHash('#/product_detail');
        var ctx = this;
        if (!ctx.args.id) ctx.args.id = localStorage['product_detail_args_id'];
        if (!ctx.args.id) ctx.args.proid = localStorage['product_detail_args_proid'];
        localStorage['product_detail_args_id'] = ctx.args.id;
        localStorage['product_detail_args_proid'] = ctx.args.proid;
        seajs.use(['ProductDetail'], function (ProductDetail) {
            new ProductDetail(page, ctx.args.id,ctx.args.proid, ctx);
        });
    });
    App.controller('product_search', function (page) {
        App.addHash('#/product_search');
        var ctx = this;
        seajs.use(['ProductSearch'], function (ProductSearch) {
            new ProductSearch(page, ctx);
        });
    });
    /*登录页面*/
    App.controller('login_dealers', function (page) {
        App.addHash('#/login_dealers');
        var ctx = this;
        this.transition = 'slide-left';
        seajs.use(['Login'], function (Login) {
            new Login(page, ctx);
        });
    });
    /*注册页面*/
    App.controller('register_dealers', function (page) {
        App.addHash('#/register_dealers');
        var ctx = this;
        this.transition = 'slide-left';
        seajs.use(['Register'], function (Register) {
            new Register(page, ctx);
        });
    });
    /*经销商*/
    App.controller('favorite_info', function (page) {
        App.addHash('#/favorite_info');
        var ctx = this;
        this.transition = 'slide-left';
        seajs.use(['FavInfo'], function (FavInfo) {
            new FavInfo(page, ctx);
        });
    });
    /*搜藏的产品*/
    App.controller('favorite_product', function (page) {
        App.addHash('#/favorite_product');
        var ctx = this;
        this.transition = 'slide-left';
        seajs.use(['FavPro'], function (FavPro) {
            new FavPro(page, ctx);
        });
    });
    /*搜藏的品牌*/
    App.controller('favorite_brand', function (page) {
        App.addHash('#/favorite_brand');
        var ctx = this;
        this.transition = 'slide-left';
        seajs.use(['FavBrand'], function (FavBrand) {
            new FavBrand(page, ctx);
        });
    });
    /*我的抵金券*/
    App.controller('favorite_money', function (page) {
        App.addHash('#/favorite_money');
        var ctx = this;
        this.transition = 'slide-left';
        seajs.use(['FavMoney'], function (FavMoney) {
            new FavMoney(page, ctx);
        });
    });
    /*我的意向合作*/
    App.controller('favorite_cooprate', function (page) {
        App.addHash('#/favorite_cooprate');
        var ctx = this;
        this.transition = 'slide-left';
        seajs.use(['FavCooprate'], function (FavCooprate) {
            new FavCooprate(page, ctx);
        });
    });
    /*我的留言*/
    App.controller('favorite_message', function (page) {
        App.addHash('#/favorite_message');
        var ctx = this;
        this.transition = 'slide-left';
        seajs.use(['FavMessage'], function (FavMessage) {
            new FavMessage(page, ctx);
        });
    });


    /*搜索页面*/
    App.controller('search', function (page) {
        App.addHash('#/search');
        this.transition = 'fade';
        var $sub = $(page).find('.cate-item-sub');
        $(page).find('.cate-item').each(function (index) {
            $(this).click(function () {
                $(this).addClass('current').siblings('.cate-item').removeClass('current');
                $sub.eq(index).addClass('cate-cur').siblings().removeClass('cate-cur');
            });
        });
        App.query('/product/price', {
            cache: true,
            success: function (result) {
                var $container = $('.search-price-ul', $(page));
                var template = $container.html();
                App.render({ render: '.search-price-ul', page: page, template: template, empty: true, data: {
                    list: result.priceList
                }});
            }
        });
    });

    window.onhashchange = function () {
        if (App.getCurrentHash() && (App.getCurrentHash() === location.hash)) return;
        if (location.hash.length > 0) {
            var _page = location.hash.substring(2, location.hash.length);
            App.back(_page.indexOf('undefined') > -1 ? 'home' : _page);
        }
    }
    App.enableDragTransition();
    try {
        if (location.hash.length > 0) {
            App.restore();
        } else {
            App.load('home');
        }
    } catch (err) {
        App.load('home');
    }
});

</script>

</body>
</html>